# MT5 Setfile Validation Project

This project automates the process of optimizing, filtering, and validating MetaTrader 5 (MT5) Expert Advisor (EA) setfiles using Python scripts and batch processing.

## Project Structure

### Main Folders

- **config/**  
  Contains configuration files for the project.
  - `settings.json`, `temp_test.ini`: Project and test settings.

- **CSV/**  
  (Purpose not specified; likely for raw or intermediate CSV data.)

- **logs/**  
  Stores log files generated by scripts for debugging and tracking.

- **processed_csv/**  
  Contains processed optimization results in CSV format.

- **raw_xml/**  
  Contains raw XML reports exported from MT5 optimization.

- **results/**  
  Stores survivor lists and filtered results.

- **scripts/**  
  All main Python scripts for automation and processing.

- **setfiles/**  
  Contains generated `.set` files for MT5 EA testing.

- **survivors/**  
  Stores the best-performing (surviving) test reports.

- **test_reports/**  
  Intended for storing HTML reports from MT5 forward/backtests.

---

### Key Files

- **requirements.txt**  
  Python dependencies (e.g., `openai`).

- **gold_template.set**  
  Template for generating new `.set` files.

- **run_batch_backtests.mq5**  
  (Currently empty) Intended as the main MQL5 script for batch backtesting in MT5.

---

### Python Scripts (in `scripts/`)

- **convert_latest_xml_to_csv.py**  
  Converts the latest MT5 optimization XML report to a CSV for further processing.

- **download_tick_data.py**  
  Downloads tick data from MetaTrader 5 for a specified symbol and date range.

- **extract_html_forward_results.py**  
  (Not shown, but likely extracts results from HTML reports.)

- **filter_and_prepare_setfiles.py**  
  Filters optimization results and generates `.set` files for survivors.

- **filter_and_score.py**  
  Scores and filters test reports, optionally using GPT for additional validation.

- **openai_client.py**  
  Handles communication with the OpenAI API for GPT-based validation and scoring.

- **run_mt5_forward_test.py**  
  Automates running forward tests in MT5 using generated setfiles and collects results.

- **setfile_generator.py**  
  Utility for saving `.set` files in the correct format for MT5.

- **utils.py**  
  Utility functions (e.g., ensuring directories exist).

---

### Data Files

- **setfiles/XAUUSD_M15_set_###.set**  
  Generated setfiles for batch testing.

- **processed_csv/XAUUSD_M15_optimization.csv**  
  Processed optimization results.

- **results/survivors_list.csv**  
  List of setfiles that passed filtering.

- **raw_xml/ReportOptimizer-52233948.xml**  
  Example raw optimization report.

---

## Usage

1. **Convert Optimization Results:**  
   Use `convert_latest_xml_to_csv.py` to convert XML to CSV.

2. **Filter and Generate Setfiles:**  
   Use `filter_and_prepare_setfiles.py` to filter results and create `.set` files.

3. **Run Forward Tests:**  
   Use `run_mt5_forward_test.py` to automate forward testing in MT5.

4. **Score and Filter Survivors:**  
   Use `filter_and_score.py` to select the best-performing strategies.

---

For more details, see the individual script files and comments.
